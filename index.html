<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GPS da Longevidade - Sistema FQ5C</title>
    <style>
        :root {
            --primary: #00c853; --secondary: #2979ff; --accent: #ffab00;
            --pink: #f50057; --purple: #d500f9; --teal: #00bfa5; --orange: #ff6d00;
            --gray: #607d8b; --bg: #f4f7f6; --white: #ffffff;
        }

        body { font-family: 'Segoe UI', system-ui, sans-serif; background: var(--bg); color: #2c3e50; margin: 0; padding: 0; }
        .container { max-width: 600px; margin: auto; min-height: 100vh; background: var(--white); padding-bottom: 80px; box-shadow: 0 0 30px rgba(0,0,0,0.1); }

        /* Cabe√ßalho */
        .header { background: linear-gradient(135deg, var(--secondary), var(--primary)); color: white; padding: 40px 20px; text-align: center; border-bottom-left-radius: 40px; border-bottom-right-radius: 40px; }
        .score-display { font-size: 4rem; font-weight: 900; display: block; line-height: 1; margin: 10px 0; }
        .brand { font-size: 0.9rem; letter-spacing: 3px; font-weight: bold; text-transform: uppercase; }

        /* Menu */
        .nav { display: flex; background: white; position: sticky; top: 0; z-index: 100; border-bottom: 1px solid #eee; }
        .nav-btn { flex: 1; border: none; background: none; padding: 15px 5px; font-weight: bold; color: #95a5a6; font-size: 0.85rem; cursor: pointer; }
        .nav-btn.active { color: var(--secondary); border-bottom: 4px solid var(--secondary); }

        .content { padding: 20px; }
        .date-input { width: 100%; padding: 15px; border-radius: 12px; border: 2px solid var(--secondary); font-size: 1.2rem; margin-bottom: 25px; text-align: center; font-weight: bold; background: #fff; box-sizing: border-box; }

        /* Estilo das Se√ß√µes */
        .verbo-header { font-size: 1.3rem; color: white; padding: 15px; border-radius: 12px; margin-top: 35px; margin-bottom: 15px; text-align: center; font-weight: bold; }
        .task-card { background: white; border-radius: 15px; padding: 15px; margin-bottom: 12px; border: 1px solid #f0f0f0; box-shadow: 0 4px 6px rgba(0,0,0,0.03); }
        .task-title { font-size: 1rem; font-weight: 600; margin-bottom: 12px; display: block; }

        .btn-group { display: flex; gap: 8px; }
        .btn-opt { flex: 1; padding: 12px; border: 2px solid #eee; border-radius: 10px; background: #fff; font-weight: bold; font-size: 0.8rem; cursor: pointer; }
        .btn-opt.f.active { background: var(--primary); color: white; border-color: var(--primary); }
        .btn-opt.p.active { background: var(--accent); color: white; border-color: var(--accent); }
        .btn-opt.n.active { background: #95a5a6; color: white; border-color: #95a5a6; }

        /* Blocos de Notas */
        .notes-box { width: 100%; height: 90px; padding: 12px; border-radius: 12px; border: 2px dashed #ddd; font-family: inherit; font-size: 0.95rem; margin-top: 5px; margin-bottom: 25px; box-sizing: border-box; background: #fffdf2; resize: none; color: #444; }

        .footer { text-align: center; padding: 40px; color: #bdc3c7; font-size: 0.8rem; border-top: 1px solid #eee; }
        .hidden { display: none; }
        .mosaico-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 5px; }
        .mosaico-day { aspect-ratio: 1; border-radius: 5px; background: #eee; display: flex; align-items: center; justify-content: center; font-size: 0.7rem; font-weight: bold; }
    </style>
</head>
<body>

<div class="container">
    <div class="header">
        <span class="brand">GPS da Longevidade</span>
        <span class="score-display" id="total-pts">0</span>
        <span style="font-weight:bold; letter-spacing:1px; background:rgba(0,0,0,0.1); padding:5px 15px; border-radius:20px;">SISTEMA FQ5C</span>
    </div>

    <div class="nav">
        <button class="nav-btn active" id="tab-hoje" onclick="changeTab('hoje')">DI√ÅRIO</button>
        <button class="nav-btn" id="tab-mosaico" onclick="changeTab('mosaico')">MOSAICO</button>
        <button class="nav-btn" id="tab-info" onclick="tab('info')">SISTEMA</button>
    </div>

    <div class="content">
        <div id="view-hoje">
            <input type="date" id="dataSel" class="date-input">
            <div id="lista-corpo"></div>
        </div>

        <div id="view-mosaico" class="hidden">
            <h3 style="text-align:center">Seu Mapa de Vitalidade</h3>
            <div class="mosaico-grid" id="mosaico-grid"></div>
        </div>

        <div id="view-info" class="hidden">
            <h2>Sobre o Sistema</h2>
            <p><strong>Autor:</strong> Psic√≥logo Ricardo de Faria Barros</p>
            <p>A Tr√≠ade do Envelhecimento Positivo integrada num sistema de 7 verbos (FQ5C).</p>
            <p>Email: ricardodefariabarros@gmail.com</p>
        </div>
    </div>

    <div class="footer">
        ¬© 2026 - Ricardo de Faria Barros<br>
        <strong>"Hoje foi o poss√≠vel. E o poss√≠vel j√° √© muito."</strong>
    </div>
</div>

<script>
    const storageKey = "GPS_V15_ULTRA";
    const db = {
        "üõ†Ô∏è FAZER": { cor: "#2979ff", tasks: ["Caminhar 10‚Äì30 min", "Alongar o corpo", "Arrumar cama / casa", "Organizar arquivo/gaveta", "Produzir algo manual", "Cuidar do jardim", "Preparar refei√ß√£o", "Registrar foto do dia", "Resolver pend√™ncia", "Fazer algo adiado"] },
        "üå± QUERER": { cor: "#d500f9", tasks: ["Querer empreender/criar", "Aprender algo novo/tocar", "Querer socializar mais", "Querer ir √† missa/culto", "Querer melhores h√°bitos", "Querer menos celular", "Querer dormir bem", "Querer ser afetuoso", "Querer perder peso", "Querer ser menos rabugento"] },
        "üéà CURTIR": { cor: "#ff6d00", tasks: ["Curtir filme/m√∫sica", "Curtir um livro", "Curtir p√¥r do sol", "Curtir comida gostosa", "Curtir lazer simples", "Curtir ficar quieto", "Curtir mem√≥ria boa", "Curtir companhia", "Curtir um banho", "Curtir natureza"] },
        "‚ù§Ô∏è CUIDAR": { cor: "#f50057", tasks: ["Cuidar de plantas", "Cuidar de animais/pets", "Beber √°gua adequadamente", "Tomar rem√©dios no hor√°rio", "Colorir a refei√ß√£o", "3 min de respira√ß√£o", "Limpeza da alma", "Escrever autobiografia", "Respeitar limites", "Cuidar de si / algu√©m"] },
        "üìö CONHECER": { cor: "#00bfa5", tasks: ["Ler 2 p√°ginas", "V√≠deo educativo", "Aprender algo novo", "Pesquisar curiosidade", "Ouvir com aten√ß√£o", "Reconhecer porteiros/etc", "Descobrir hist√≥ria", "Mudar de opini√£o", "Estudar um tema", "Ver lugar virtual"] },
        "üí¨ CONVERSAR": { cor: "#1565c0", tasks: ["Mandar mensagem carinhosa", "Telefonar para algu√©m", "Conversar com vizinho", "Pedir ajuda", "Ouvir sem interromper", "Visitar algu√©m", "Falar sentimentos", "Rir com algu√©m", "Encontro para caf√©", "Participar de grupo"] },
        "ü§ù COMPARTILHAR": { cor: "#00c853", tasks: ["Ajudar com presen√ßa", "Doar o que n√£o usa", "Partilhar hist√≥ria", "Solidariedade concreta", "Partilhar refei√ß√£o", "Dar um abra√ßo", "Dar palavra de apoio", "Partilhar sil√™ncio", "Dividir conhecimento", "Partilhar f√©/esperan√ßa"] },
        "‚ûï OUTROS": { cor: "#607d8b", tasks: ["Resolver imprevisto", "Organizar contas/finan√ßas", "Compras necess√°rias", "Cuidar de documentos", "Pequeno reparo/conserto", "Necessidade familiar", "Organizar compromissos", "Tr√¢mite banc√°rio/digital", "Planejar dia seguinte", "Pr√°tica livre ou extra"] }
    };

    function render() {
        try {
            const dataInput = document.getElementById('dataSel');
            if (!dataInput) return;
            const data = dataInput.value;
            const container = document.getElementById('lista-corpo');
            if (!container) return;
            
            let html = '';
            for (let verbo in db) {
                html += `<div class="verbo-header" style="background:${db[verbo].cor}">${verbo}</div>`;
                db[verbo].tasks.forEach(t => {
                    const safeId = t.replace(/[^a-z0-9]/gi, '').substring(0, 15);
                    const id = `${storageKey}_${data}_${safeId}`;
                    const val = localStorage.getItem(id) || 'n';
                    html += `<div class="task-card"><span class="task-title">${t}</span><div class="btn-group">
                        <button class="btn-opt f ${val==='f'?'active':''}" onclick="salvar('${id}','f')">Fiz</button>
                        <button class="btn-opt p ${val==='p'?'active':''}" onclick="salvar('${id}','p')">Parte</button>
                        <button class="btn-opt n ${val==='n'?'active':''}" onclick="salvar('${id}','n')">N√£o</button>
                    </div></div>`;
                });
                const safeV = verbo.replace(/[^a-z0-9]/gi, '').substring(0, 5);
                const noteId = `note_v15_${data}_${safeV}`;
                const noteVal = localStorage.getItem(noteId) || '';
                html += `<p style="font-size:0.8rem; font-weight:bold; margin-bottom:5px; color:#666;">üìù Anota√ß√µes sobre ${verbo}:</p>
                <textarea class="notes-box" id="${noteId}" oninput="salvarNota('${noteId}')" placeholder="Sua reflex√£o...">${noteVal}</textarea>`;
            }
            container.innerHTML = html;
            calc();
        } catch (e) { console.error("Erro no render:", e); }
    }

    function salvar(id, val) { localStorage.setItem(id, val); render(); }
    function salvarNota(id) { localStorage.setItem(id, document.getElementById(id).value); }

    function calc() {
        let total = 0;
        for (let i = 0; i < localStorage.length; i++) {
            const k = localStorage.key(i);
            if (k && k.startsWith(storageKey)) {
                const v = localStorage.getItem(k);
                total += (v === 'f' ? 10 : v === 'p' ? 5 : 0);
            }
        }
        document.getElementById('total-pts').innerText = total;
    }

    function changeTab(v) {
        ['view-hoje', 'view-mosaico', 'view-info'].forEach(id => document.getElementById(id).classList.add('hidden'));
        document.getElementById('view-' + v).classList.remove('hidden');
        document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
        document.getElementById('tab-' + (v === 'info' ? 'info' : v)).classList.add('active');
        if(v === 'mosaico') renderMosaico();
    }

    function renderMosaico() {
        const grid = document.getElementById('mosaico-grid');
        grid.innerHTML = '';
        const hoje = new Date();
        const dias = new Date(hoje.getFullYear(), hoje.getMonth() + 1, 0).getDate();
        for (let d = 1; d <= dias; d++) {
            const box = document.createElement('div');
            box.className = 'mosaico-day';
            box.innerText = d;
            grid.appendChild(box);
        }
    }

    document.addEventListener('DOMContentLoaded', () => {
        const dataInput = document.getElementById('dataSel');
        dataInput.value = new Date().toISOString().split('T')[0];
        dataInput.addEventListener('change', render);
        render();
    });
</script>
</body>
</html>